extends ../layout
block content
  //删除操作提示
  include ../operation-comfirm.pug
  include ../operation-status.pug
        
  //顶部导航
  include ../menu
  main.col-md-9.ml-sm-auto.col-lg-10.px-4(role='main')
    a(id='createBtn' href='/admin/categories/update' class='btn btn-primary' role='button' style='margin:10px 0 10px 0;') 添加栏目    
    -if(categories && categories.length)
      .table-responsive
        table.table.table-striped.table-sm
          thead
            tr
              th 序号
              th 栏目名称 
              th 别名/短名
              th 最后更新
              th 创建时间
              th 操作
          tbody
            each category,index in categories
              tr
                th #{index + 1}       
                td= category.name
                td= category.shortName
                td= category.lastModifyTime
                td= category.createTime
                td
                  a(href='/admin/categories/update?id='+category._id class='btn-sm') 更新
                  a(href='#confirmModal' data-url='/api/categories/'+category._id class='btn-sm' data-toggle='modal' data-name=category.name data-id=category._id) 删除 
      nav
        ul.pagination.justify-content-center
         -if(pagination.page <= 1)
          li.page-item.disabled
            a(class='page-link' href='#' tabindex='-1' aria-disabled='true') 上一页
         -else
          li.page-item
            a(class='page-link' href='/admin/categories?limit=' + pagination.limit + '&page=' + (pagination.page - 1) + (keywds ? '&keywds=' + keywds : '' )) 上一页       
         -if(pagination)
           -for(var i = 1; i <= pagination.pages; i++)
             -if(i == pagination.page)
               li(class='page-item active' aria-current='page')
                 a(class='page-link' href='#') #{i}
                   span(class='sr-only') (current)
             -else
               li.page-item
                 a(class='page-link' href='/admin/categories?limit=' + pagination.limit + '&page=' + i + (keywds ? '&keywds=' + keywds : '' )) #{i}
         -if(pagination.page < pagination.pages)
          li.page-item
            a(class='page-link' href='/admin/categories?limit=' + pagination.limit + '&page=' + (pagination.page + 1) + (keywds ? '&keywds=' + keywds : '' )) 下一页
         -else
          li.page-item.disabled
            a(class='page-link' href='#' tabindex='-1' aria-disabled='true') 下一页
    -else
      p 暂无数据.                          
       
block script
  include ../scripts
  script(src='/admin/javascripts/common-index.js')
