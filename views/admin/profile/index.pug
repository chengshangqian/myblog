extends ../layout
block content
  include ../operation-status.pug
    
  include ../menu
  main.col-md-9.ml-sm-auto.col-lg-10.px-4(role='main')
    nav
      #nav-tab.nav.nav-tabs(role='tablist')
        a#nav-home-tab.nav-item.nav-link.active(data-toggle='tab', href='#nav-home', role='tab', aria-controls='nav-home', aria-selected='true') 个人信息
        a#nav-profile-tab.nav-item.nav-link(data-toggle='tab', href='#nav-profile', role='tab', aria-controls='nav-profile', aria-selected='false') 修改密码
    #nav-tabContent.tab-content
      #nav-home.tab-pane.fade.show.active(role='tabpanel', aria-labelledby='nav-home-tab') 
        form(id='updateForm' method='POST' class='needs-validation' enctype='multipart/form-data' style='margin:10px 0 10px 0;' novalidate)
          input(type='hidden' name='id' value=user._id)
          div.form-row
            div(class='col-md-3 mb-3')
              label(for='nickname') 昵称
              input(type='text' class='form-control' id='nickname' name='nickname' value=user.nickname placeholder='请输入昵称'  required)
              .invalid-feedback 请输入昵称
            div(class='col-md-3 mb-3')
              label(for='realname') 真实姓名
              input(type='text' class='form-control' id='realname' name='realname' value=user.realname placeholder='请输入真实姓名' )
          div.form-row
            div(class='col-md-3 mb-3')
              label(for='mobile') 手机号
              input(type='mobile' class='form-control' id='mobile' name='mobile' value=user.mobile placeholder='请输入手机号' )
            div(class='col-md-3 mb-3')
              label(for='email') 邮箱
              input(type='email' class='form-control' id='email' name='email' value=user.email placeholder='请输入邮箱' )
              .invalid-feedback 请输入正确的邮箱地址
          div.form-row
            div(class='col-md-3 mb-3')
              label(for='wx') 微信号
              input(type='wx' class='form-control' id='wx' name='wx' value=user.wx placeholder='请输入微信号' )
            div(class='col-md-3 mb-3')
              label(for='weibo') 微博
              input(type='weibo' class='form-control' id='weibo' name='weibo' value=user.weibo placeholder='请输入微博' )
          div.form-row
            div(class='col-md-6 mb-3')
              img.rounded-circle(src=user.photo style='height:48px;width:48px;')               
          div(class='custom-file')
            div(class='col-md-6 mb-3')
              input(type='file' class='custom-file-input' id='photo' name='photo')
              label(for='photo' class='custom-file-label' data-browse='选择') 选择照片
              small 支持.png .jpeg .jpg文件格式
          div.form-row(style='margin-top:10px;')
            button(type='submit' class='btn btn-primary') 更新
            button(type='reset' class='btn btn-secondary' style='margin-left:10px;') 重置
          
      #nav-profile.tab-pane.fade(role='tabpanel', aria-labelledby='nav-profile-tab')
        form(id='updatePasswdForm' method='POST' class='needs-validation' style='margin:10px 0 10px 0;' novalidate)
          input(type='hidden' name='id' value=user._id)
          input(type='hidden' name='operation' value='updatePasswd')
          div.form-row
            div(class='col-md-3 mb-3')
              label(for='oldPasswd') 原密码
              input(type='password' class='form-control' id='oldPasswd' name='oldPasswd' placeholder='请输入原密码'  required)
              .invalid-feedback 请输入原密码
          div.form-row  
            div(class='col-md-3 mb-3')
              label(for='passwd') 新密码
              input(type='password' class='form-control' id='passwd' name='passwd' placeholder='请输入新密码'  required)
              .invalid-feedback 请输入密码
          div.form-row  
            div(class='col-md-3 mb-3')
              label(for='repeatPasswd') 重复密码
              input(type='password' class='form-control' id='repeatPasswd' name='repeatPasswd' placeholder='请输入新密码'  required)
              .invalid-feedback 请输入新密码
          div.form-row(style='margin-top:10px;')
            button(type='submit' class='btn btn-primary') 更新
            button(type='reset' class='btn btn-secondary' style='margin-left:10px;') 重置     
     
block script
  include ../scripts
  script(src='/components/bsCustomFileInput/bs-custom-file-input.min.js') 
  script(src='/admin/javascripts/common-update.js') 
  script(src='/admin/javascripts/profile/index.js')
